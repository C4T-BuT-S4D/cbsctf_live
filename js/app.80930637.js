(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],l=0,g=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&g.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(g.length)g.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/cbsctf_live/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var p=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("vue-telegram-login",{attrs:{mode:"callback","telegram-login":"cbsctf_regbot",userpic:"true",requestAccess:"write"},on:{callback:e.telegramAuth}}),n("div",[e._v("My registration:")]),n("div",[e._v(e._s(e.registration))]),n("button",{staticClass:"unregister",attrs:{type:"button"},on:{click:e.unregister}},[e._v(" Unregister ")]),n("div",[n("p",[e._v("Registration form")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.teamName,expression:"teamName"}],attrs:{type:"text",placeholder:"Team Name"},domProps:{value:e.teamName},on:{input:function(t){t.target.composing||(e.teamName=t.target.value)}}}),n("button",{staticClass:"register",attrs:{type:"button"},on:{click:e.register}},[e._v(" Register ")])]),n("div",[n("p",[e._v("Join by token form")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.joinToken,expression:"joinToken"}],attrs:{type:"text",placeholder:"Join token"},domProps:{value:e.joinToken},on:{input:function(t){t.target.composing||(e.joinToken=t.target.value)}}}),n("button",{staticClass:"join",attrs:{type:"button"},on:{click:e.joinTeam}},[e._v("Join")])])],1)},a=[],i=(n("96cf"),n("1da1")),s=n("5530"),c=n("d226"),u=n("2f62"),p={components:{vueTelegramLogin:c["vueTelegramLogin"]},data:function(){return{teamName:"",joinToken:""}},methods:Object(s["a"])({telegramAuth:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Called the callback"),console.log(t),e.next=4,this.$http.post("/telegram/callback/",t);case 4:n=e.sent,r=n.data,console.log("Got server response"),console.log(r),o=r.token,this.setAccessToken(o),this.updateRegistration();case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/registrations/",{team_name:this.teamName});case 2:this.updateRegistration();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),unregister:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.delete("/registrations/");case 2:this.updateRegistration();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),joinTeam:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("/registrations/join/",{join_token:this.joinToken});case 2:this.updateRegistration();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Object(u["b"])(["setAccessToken","updateRegistration"])),computed:Object(s["a"])({},Object(u["c"])({registration:"getRegistration"}))},l=p,g=n("2877"),f=Object(g["a"])(l,o,a,!1,null,null,null),m=f.exports,d=n("8c4f");r["a"].use(d["a"]);var h=[],v=new d["a"]({mode:"history",base:"/cbsctf_live/",routes:h}),b=v,k=n("bc3a"),w=n.n(k);r["a"].use(u["a"]);var y=new u["a"].Store({state:{accessToken:"",registration:null},mutations:{setAccessToken:function(e,t){e.accessToken=t},setRegistration:function(e,t){e.registration=t}},actions:{setAccessToken:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("setAccessToken",n),e.next=3,t.dispatch("fetchUser");case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),updateRegistration:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/registrations/");case 2:n=e.sent,r=n.data,console.log("User registration:",r),t.commit("setRegistration",r);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},getters:{getAccessToken:function(e){return e.accessToken},getRegistration:function(e){return e.registration}},modules:{}}),j="https://mighty-tundra-69044.herokuapp.com/";r["a"].config.productionTip=!1,w.a.defaults.baseURL=j,w.a.interceptors.request.use((function(e){var t=y.getters.getAccessToken;return e.headers.Authorization="Token "+t,e})),r["a"].prototype.$http=w.a,new r["a"]({router:b,store:y,render:function(e){return e(m)}}).$mount("#app")}});
//# sourceMappingURL=app.80930637.js.map